<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/style2.css">
    <link rel="icon" type="image/png" href="/favicon.png" />

</head>

<body>
    <div class="section container">
        <h2 class="section-title">Login</h2>
        <p class="section-subtitle">Use your VIT credentials to login</p>
        <form action="/login" method="POST" class="contact-form">
            <% if (error) { %>
                <p style="color: red;">
                    <%= error %>
                </p>
                <% } %>

                    <div class="form-group">
                        <label>VIT Email</label>
                        <input type="email" name="email" required />
                    </div>

                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" name="password" required />
                    </div>

                    <button type="submit" class="cta-button">Login</button>

                    <div id="loader" style="display: none; text-align: center; margin-top: 1rem;">
                        <img src="/loader.gif" alt="Loading..." style="width: 40px; height: 40px;" />
                        <p style="margin-top: 0.5rem;">Processing...</p>
                    </div>
        </form>

        <!-- ðŸ‘‡ Signup redirect button -->
        <div style="margin-top: 1.5rem; text-align: center;">
            <p>Don't have an account?</p>
            <a href="/signup" class="cta-button" style="text-decoration: none;">Go to Signup</a>
        </div>
    </div>

    <script>
        const form = document.querySelector("form");
        const loader = document.getElementById("loader");
        form.addEventListener("submit", () => {
            loader.style.display = "block";
        });
    </script>
    <script>
        // Prevent user from navigating back after logout
        if (window.history && window.history.pushState) {
            window.history.pushState(null, "", window.location.href);
            window.onpopstate = function () {
                window.history.pushState(null, "", window.location.href);
            };
        }
    </script>

</body>

</html>